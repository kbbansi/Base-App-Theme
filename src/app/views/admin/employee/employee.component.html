<div class="main-panel">
  <div class="main-content">
    <div class="content-wrapper">
      <div class="container-fluid">
        <div class="row">
          <div class="col-sm-12">
            <h2 class="content-header">Employees</h2>
          </div>
        </div>
        <div class="row">
          <div class="col-lg col-lg-12">
            <div class="card">
              <div class="card-header">
                <div class="card-title-wrap bar-success">
                  <p class="mb-0"><button class="btn btn-primary block" (click)="openemployeemodal(employeemodal)">Add Employee</button></p>
                </div>
              </div>
              <div class="card-body">
                <div class="px-3">
                  <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                      <th width="2%"></th>
                      <th width="2%">No.</th>
                      <th width="10%">ID</th>
                      <th width="20%">Name</th>
                      <th width="20%">Unit</th>
                      <th width="10%">Rank</th>
                      <th width="10%">Department</th>
                      <th width="10%">Mobile No.</th>
                      <th width="10%">Office Location</th>
                    </tr>
                    </thead>
                    <tbody *ngIf="employeelist.length > 0">
                    <tr *ngFor="let d of employeelist">
                      <td>
                        <div class="btn-group" dropdown>
                          <span class="caret" dropdownToggle class="dropdown-toggle"></span>
                          <ul *dropdownMenu class="dropdown-menu" role="menu">
                            <li role="menuitem"><a class="dropdown-item" (click)="openupdateemployeemodal(d, updateemployeemodal)">Update </a></li>
                          </ul>
                        </div>
                      </td>
                      <td>{{d.id}}</td>
                      <td>{{d.employeeid}}</td>
                      <td>{{d.employeename}}</td>
                      <td>{{d.unit}}</td>
                      <td>{{d.rank}}</td>
                      <td>{{d.department}}</td>
                      <td>{{d.mobileno}}</td>
                      <td>{{d.officelocation}}</td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <footer class="footer footer-static footer-light">
    <p class="clearfix text-muted text-center px-2"><span>Copyright &copy; 2019 <a class="text-bold-800 primary darken-2">GRA</a>, All rights reserved. </span></p>
  </footer>
</div>
<ng-template #updateemployeemodal>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Update Employee</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <form [formGroup]="updateemployeemodalForm">
    <div class="modal-body">

      <div class="form-group">
        <label>Employee ID</label>
        <input type="text" formControlName="employeeid" class="form-control" disabled="true">
      </div>


      <div class="form-group">
        <label>Name</label>
        <input type="text" formControlName="name" class="form-control">
      </div>

      <div class="form-group">
        <label>Bank</label>
        <input type="text" formControlName="bank" class="form-control">
      </div>

      <div class="form-group">
        <label>Number</label>
        <input type="text" formControlName="mobile" class="form-control">
      </div>



      <!-- <div class="form-group">
                    <label>Department</label>
                       <select formContolName="department" class="form-control">
                      <option>Select a Department</option>
                      <option [value]="Finance">Finance</option>
                      <option [value]="Operations">Operations</option>
                    </select>
                    </div> -->

      <!-- <select class="form-control" #department  formControlName="department" *ngIf="departmentlist.length > 0"> -->
      <!-- <option *ngFor="let d of departmentlist" value="{{d.name}}" >{{d.name}}</option> -->


      <div class="form-group">
        <label>Department</label>
        <select class="form-control" #department formControlName="department" *ngIf="departmentlist.length > 0">
          <option *ngFor="let d of departmentlist" value="{{d.name}}">{{ d.name }}</option>
        </select>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn btn-primary" (click)="updateemployee()"
              [disabled]="updateemployeemodalForm.invalid">Update</button>
    </div>
  </form>
</ng-template>
<ng-template #employeemodal>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Add Employee</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <form [formGroup]="employeemodalForm">
    <div class="modal-body">

      <div class="form-group">
        <label>User ID</label>
        <input type="text" formControlName="employeeid" class="form-control">
      </div>


      <div class="form-group">
        <label>Name</label>
        <input type="text" formControlName="employeename" class="form-control">
      </div>

      <div class="form-group">
        <label>Department</label> <!--Should be a drop down -->
        <select class="form-control" #department formControlName="department" *ngIf="departmentlist.length > 0">
          <option *ngFor="let d of departmentlist" value="{{ d.name }}">{{ d.name }}</option>
        </select>
      </div>



      <div class="form-group">
        <label>Unit</label> <!--Should be a drop down -->
        <select class="form-control" #unit formControlName="unit" *ngIf="unitlist.length > 0">
          <option *ngFor="let u of unitlist" value="{{ u.name }}">{{ u.name }}</option>
        </select>
      </div>


      <div class="form-group">
        <label>Rank</label>
        <select class="form-control" #rank formControlName="rank" *ngIf="ranklist.length > 0">
          <option *ngFor="let rank of ranklist" value="{{ rank.name }}">{{ rank.name }}</option>
        </select>
      </div>

      <div class="form-group">
        <label>Office Location</label>
        <select class="form-control" #officelocation formControlName="officelocation" *ngIf="officelocationlist.length > 0">
          <option *ngFor="let location of officelocationlist" value="{{ location.name }}">{{ location.name }}</option>
        </select>
      </div>

      <div class="form-group">
        <label>Mobile Number</label>
        <input type="text" class="form-control" #mobileno formControlName="mobileno">
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary" (click)="saveGraEmployee()">Save</button>
    </div>
  </form>
</ng-template>
